<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é»å¿ƒæè¿°éŠæˆ²å¹³å°</title>
    <style>
        :root {
            --color-cream-50: rgba(252, 252, 249, 1);
            --color-cream-100: rgba(255, 255, 253, 1);
            --color-slate-900: rgba(19, 52, 59, 1);
            --color-slate-500: rgba(98, 108, 113, 1);
            --color-teal-500: rgba(33, 128, 141, 1);
            --color-teal-600: rgba(29, 116, 128, 1);
            --color-teal-700: rgba(26, 104, 115, 1);
            --color-brown-600: rgba(94, 82, 64, 1);
            --color-brown-600-rgb: 94, 82, 64;
            --color-red-500: rgba(192, 21, 47, 1);
            --color-red-500-rgb: 192, 21, 47;
            --color-orange-500: rgba(168, 75, 47, 1);
            --color-teal-300: rgba(50, 184, 198, 1);
            --color-bg-1: rgba(59, 130, 246, 0.08);
            --color-bg-2: rgba(245, 158, 11, 0.08);
            --color-bg-3: rgba(34, 197, 94, 0.08);
            --color-bg-4: rgba(239, 68, 68, 0.08);
            --color-bg-5: rgba(147, 51, 234, 0.08);
            --color-success: var(--color-teal-500);
            --color-error: var(--color-red-500);
            --color-success-rgb: 33, 128, 141;
            --color-error-rgb: 192, 21, 47;
            --color-background: var(--color-cream-50);
            --color-surface: var(--color-cream-100);
            --color-text: var(--color-slate-900);
            --color-text-secondary: var(--color-slate-500);
            --color-primary: var(--color-teal-500);
            --color-primary-hover: var(--color-teal-600);
            --color-primary-active: var(--color-teal-700);
            --color-border: rgba(var(--color-brown-600-rgb), 0.2);
            --font-family-base: "Inter", -apple-system, sans-serif;
            --font-size-xs: 11px;
            --font-size-sm: 12px;
            --font-size-md: 14px;
            --font-size-lg: 16px;
            --font-size-xl: 18px;
            --font-size-2xl: 20px;
            --font-size-3xl: 24px;
            --font-weight-medium: 500;
            --font-weight-semibold: 550;
            --line-height-normal: 1.5;
            --space-4: 4px;
            --space-8: 8px;
            --space-12: 12px;
            --space-16: 16px;
            --space-20: 20px;
            --space-24: 24px;
            --space-32: 32px;
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 12px;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04);
            --duration-fast: 150ms;
            --duration-normal: 250ms;
            --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);
            --focus-ring: 0 0 0 3px rgba(33, 128, 141, 0.4);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --color-background: rgba(31, 33, 33, 1);
                --color-surface: rgba(38, 40, 40, 1);
                --color-text: rgba(245, 245, 245, 1);
                --color-text-secondary: rgba(167, 169, 169, 0.7);
                --color-primary: var(--color-teal-300);
                --color-primary-hover: rgba(45, 166, 178, 1);
                --color-primary-active: rgba(41, 150, 161, 1);
                --color-border: rgba(119, 124, 124, 0.3);
                --color-success: var(--color-teal-300);
                --color-error: rgba(255, 84, 89, 1);
                --color-success-rgb: 50, 184, 198;
                --color-error-rgb: 255, 84, 89;
                --focus-ring: 0 0 0 3px rgba(50, 184, 198, 0.4);
            }
        }

        body {
            font-family: var(--font-family-base);
            background: var(--color-background);
            color: var(--color-text);
            margin: 0;
            padding: var(--space-32);
            line-height: var(--line-height-normal);
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        .game-title {
            font-size: var(--font-size-3xl);
            text-align: center;
            color: var(--color-primary);
            margin-bottom: var(--space-24);
        }

        .instructions-card {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            padding: var(--space-24);
            border: 2px solid var(--color-border);
            box-shadow: var(--shadow-md);
            max-width: 800px;
            margin: 0 auto var(--space-32);
        }

        .four-parts {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-16);
        }

        .part {
            background: var(--color-bg-1);
            border-radius: var(--radius-md);
            padding: var(--space-16);
            text-align: center;
            transition: all var(--duration-normal) var(--ease-standard);
        }

        .part:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .part.taste { background: var(--color-bg-4); border-color: rgba(239, 68, 68, 0.3); }
        .part.aroma { background: var(--color-bg-5); border-color: rgba(147, 51, 234, 0.3); }
        .part.appearance { background: var(--color-bg-3); border-color: rgba(34, 197, 94, 0.3); }
        .part.special { background: var(--color-bg-2); border-color: rgba(245, 158, 11, 0.3); }

        .part-icon {
            font-size: 2rem;
            margin-bottom: var(--space-8);
        }

        .part-title {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-semibold);
        }

        .part-desc {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
        }

        .game-instructions {
            background: var(--color-bg-1);
            padding: var(--space-20);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-24);
            border: 1px solid var(--color-border);
        }

        .game-instructions p {
            margin-bottom: var(--space-12);
            font-weight: var(--font-weight-medium);
        }

        .game-instructions ol {
            padding-left: var(--space-20);
        }

        .btn {
            background: var(--color-primary);
            color: var(--color-background);
            padding: var(--space-12) var(--space-24);
            border-radius: var(--radius-md);
            border: none;
            cursor: pointer;
            font-size: var(--font-size-md);
            transition: background var(--duration-fast) var(--ease-standard);
        }

        .btn:hover {
            background: var(--color-primary-hover);
        }

        .demo-section {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            padding: var(--space-24);
            margin-bottom: var(--space-20);
            border: 2px solid var(--color-border);
            transition: all var(--duration-normal) var(--ease-standard);
        }

        .demo-section:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .demo-section.taste { border-color: rgba(239, 68, 68, 0.3); background: var(--color-bg-4); }
        .demo-section.aroma { border-color: rgba(147, 51, 234, 0.3); background: var(--color-bg-5); }
        .demo-section.appearance { border-color: rgba(34, 197, 94, 0.3); background: var(--color-bg-3); }
        .demo-section.special { border-color: rgba(245, 158, 11, 0.3); background: var(--color-bg-2); }

        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: var(--space-16);
        }

        .section-icon {
            font-size: 1.5rem;
            margin-right: var(--space-12);
        }

        .section-header h3 {
            font-size: var(--font-size-xl);
            margin: 0;
        }

        .dish-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-24);
            max-width: 1000px;
            margin: 0 auto var(--space-32);
        }

        .dish-card {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            padding: var(--space-20);
            text-align: center;
            cursor: pointer;
            border: 2px solid var(--color-border);
            transition: all var(--duration-normal) var(--ease-standard);
        }

        .dish-card:hover {
            transform: translateY(-4px);
            border-color: var(--color-primary);
            box-shadow: var(--shadow-md);
        }

        .dish-image {
            width: 100%;
            height: 150px;
            border-radius: var(--radius-md);
            background-size: cover;
            background-position: center;
            margin-bottom: var(--space-16);
            background-color: var(--color-bg-1);
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-24);
            flex-wrap: wrap;
            gap: var(--space-16);
        }

        .game-dish-info {
            display: flex;
            align-items: center;
            gap: var(--space-16);
        }

        .dish-image-small {
            width: 80px;
            height: 80px;
            border-radius: var(--radius-md);
            border: 2px solid var(--color-primary);
            background-size: cover;
            background-position: center;
            background-color: var(--color-bg-1);
        }

        .game-content {
            display: flex;
            flex-direction: row-reverse;
            gap: var(--space-24);
        }

        .text-area {
            flex: 1;
        }

        .vocabulary-bank {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            padding: var(--space-20);
            border: 2px solid var(--color-border);
            width: 300px;
            position: sticky;
            top: var(--space-32);
        }

        .game-section {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            padding: var(--space-20);
            border: 2px solid var(--color-border);
            margin-bottom: var(--space-20);
        }

        .game-section.taste { border-color: rgba(239, 68, 68, 0.3); }
        .game-section.aroma { border-color: rgba(147, 51, 234, 0.3); }
        .game-section.appearance { border-color: rgba(34, 197, 94, 0.3); }
        .game-section.special { border-color: rgba(245, 158, 11, 0.3); }

        .blank {
            display: inline-block;
            min-width: 80px;
            height: 30px;
            border: 2px dashed var(--color-border);
            border-radius: var(--radius-sm);
            margin: 0 var(--space-4);
            background: var(--color-bg-1);
            vertical-align: middle;
            transition: all var(--duration-fast) var(--ease-standard);
        }

        .blank.drag-over {
            border-color: var(--color-primary);
            background: var(--color-bg-3);
            transform: scale(1.05);
        }

        .blank.filled {
            border-style: solid;
            border-color: var(--color-success);
        }

        .vocabulary-word {
            background: var(--color-bg-2);
            padding: var(--space-8) var(--space-12);
            border-radius: var(--radius-md);
            cursor: grab;
            text-align: center;
            margin-bottom: var(--space-8);
            transition: all var(--duration-fast) var(--ease-standard);
        }

        .vocabulary-word:hover {
            background: rgba(245, 158, 11, 0.2);
            transform: translateY(-1px);
        }

        .vocabulary-word.used {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .vocabulary-word.dragging {
            opacity: 0.5;
            transform: scale(1.05);
        }

        .filled-word {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: var(--color-success);
            color: var(--color-background);
            padding: var(--space-4) var(--space-8);
            border-radius: var(--radius-sm);
            min-width: 80px;
            height: 30px;
            margin: 0 var(--space-4);
            vertical-align: middle;
            transition: all var(--duration-fast) var(--ease-standard);
        }

        .filled-word:hover {
            transform: scale(1.05);
        }

        .filled-word.correct {
            background: var(--color-success);
            color: var(--color-background);
        }

        .filled-word.incorrect {
            background: var(--color-error);
            color: var(--color-background);
        }

        .section-feedback {
            margin-left: auto;
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-semibold);
        }

        .section-feedback.correct { color: var(--color-success); }
        .section-feedback.incorrect { color: var(--color-error); }

        .special-textarea {
            width: 100%;
            min-height: 120px;
            padding: var(--space-12);
            border: 2px solid var(--color-border);
            border-radius: var(--radius-md);
            background: var(--color-surface);
            color: var(--color-text);
            font-family: var(--font-family-base);
            font-size: var(--font-size-md);
            resize: vertical;
            transition: border-color var(--duration-fast) var(--ease-standard);
        }

        .special-textarea:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: var(--focus-ring);
        }

        @media (max-width: 768px) {
            .four-parts {
                grid-template-columns: 1fr;
            }

            .game-content {
                flex-direction: column-reverse;
            }

            .vocabulary-bank {
                position: static;
                width: 100%;
                max-width: 300px;
                margin: 0 auto;
            }

            .game-header {
                flex-direction: column;
                align-items: stretch;
            }

            .dish-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--space-8);
            }

            .section-feedback {
                align-self: flex-end;
                margin-left: 0;
            }
        }

        @media (max-width: 480px) {
            .dish-grid {
                grid-template-columns: 1fr;
            }

            .game-dish-info {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div id="welcome-screen" class="screen active">
        <h1 class="game-title">ğŸ¥Ÿ é»å¿ƒæè¿°éŠæˆ²å¹³å° ğŸ¥¢</h1>
        <div class="instructions-card">
            <h2>å­¸ç¿’ä¸­å¼é»å¿ƒæè¿°æŠ€å·§</h2>
            <div class="four-parts">
                <div class="part taste">
                    <div class="part-icon">ğŸ‘…</div>
                    <div class="part-title">å‘³</div>
                    <div class="part-desc">å£æ„Ÿèˆ‡å‘³é“</div>
                </div>
                <div class="part aroma">
                    <div class="part-icon">ğŸ‘ƒ</div>
                    <div class="part-title">é¦™</div>
                    <div class="part-desc">é¦™æ°£èˆ‡æ°£å‘³</div>
                </div>
                <div class="part appearance">
                    <div class="part-icon">ğŸ‘ï¸</div>
                    <div class="part-title">è‰²</div>
                    <div class="part-desc">å¤–è§€èˆ‡é¡è‰²</div>
                </div>
                <div class="part special">
                    <div class="part-icon">âœ¨</div>
                    <div class="part-title">ç‰¹åˆ¥ä¹‹è™•</div>
                    <div class="part-desc">ç¨ç‰¹ç‰¹è‰²</div>
                </div>
            </div>
            <div class="game-instructions">
                <p>ğŸ“ éŠæˆ²èªªæ˜ï¼š</p>
                <ol>
                    <li>å…ˆè§€çœ‹ç¤ºç¯„ä¾‹å­äº†è§£æè¿°çµæ§‹</li>
                    <li>é¸æ“‡ä½ æƒ³ç·´ç¿’çš„é»å¿ƒ</li>
                    <li>å°‡å³å´è©å½™æ‹–æ‹‰åˆ°ç©ºæ ¼ä¸­å®Œæˆæè¿°ï¼ˆå‘³ã€é¦™ã€è‰²ä¸‰éƒ¨åˆ†ï¼‰</li>
                    <li>åœ¨"ç‰¹åˆ¥ä¹‹è™•"æ¬„ä½è‡ªç”±æ›¸å¯«ä½ çš„æƒ³æ³•</li>
                    <li>å¯ä»¥é‡è¤‡ç·´ç¿’ä¸åŒçš„é»å¿ƒ</li>
                </ol>
            </div>
            <div class="action-buttons">
                <button class="btn" id="start-demo">é–‹å§‹ç¤ºç¯„</button>
            </div>
        </div>
    </div>

    <div id="demo-screen" class="screen">
        <h1 class="game-title">ç¤ºç¯„ä¾‹å­ï¼šè¦é¤ƒçš‡</h1>
        <div class="demo-content">
            <div class="demo-section taste">
                <div class="section-header">
                    <span class="section-icon">ğŸ‘…</span>
                    <h3>å‘³ (å£æ„Ÿèˆ‡å‘³é“)</h3>
                </div>
                <p>é€™é“é»å¿ƒé¸ç”¨é®®æ´»å¤§è¦ä½œç‚ºä¸»è¦é¤¡æ–™ï¼Œå› ç‚ºå®ƒè‚‰è³ªå½ˆå«©ï¼Œæ­é…ç«¹ç­ä¸å’Œæ–°é®®è±¬è‚‰ï¼Œåƒèµ·ä¾†æ¸…è„†é®®ç”œï¼Œçˆ½å£å¤šæ±ã€‚</p>
            </div>
            <div class="demo-section aroma">
                <div class="section-header">
                    <span class="section-icon">ğŸ‘ƒ</span>
                    <h3>é¦™ (é¦™æ°£èˆ‡æ°£å‘³)</h3>
                </div>
                <p>æˆ‘å€‘ç”¨è–‘æ±å’Œç±³é…’é–ä½é®®å‘³ï¼Œæ•£ç™¼è¦çš„æ¸…é®®é¦™æ°£ã€‚æˆ–è®“è¦è‚‰æ•£ç™¼æ¸…é®®é¦™æ°£ã€‚</p>
            </div>
            <div class="demo-section appearance">
                <div class="section-header">
                    <span class="section-icon">ğŸ‘ï¸</span>
                    <h3>è‰² (å¤–è§€èˆ‡é¡è‰²)</h3>
                </div>
                <p>æ¡ç”¨åˆ€æŠ¼éºµçš®çš„æŠ€è¡“ï¼Œå°‡éºµåœ˜æŠ¼æˆè–„å¦‚èŸ¬ç¿¼çš„é¤ƒçš®ï¼Œè®“è’¸ç†Ÿå¾Œçš„è¦é¤ƒï¼Œå‘ˆç¾å‡ºç²‰ç´…è¦è‚‰ã€‚</p>
            </div>
            <div class="demo-section special">
                <div class="section-header">
                    <span class="section-icon">âœ¨</span>
                    <h3>ç‰¹åˆ¥ä¹‹è™•</h3>
                </div>
                <p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæ¯ä¸€é¡†éƒ½ç”±äººæ‰‹æè£½18å€‹çšºæ‘ºï¼Œååˆ†è€ƒé©—å¸«å‚…çš„æ‰‹è—å’Œç¶“é©—ï¼Œä¹Ÿæ˜¯ç²µèœç²¾ç·»æŠ€è—çš„ä»£è¡¨ä½œã€‚</p>
            </div>
            <div class="action-buttons">
                <button class="btn" id="start-game">é–‹å§‹ç·´ç¿’</button>
            </div>
        </div>
    </div>

    <div id="selection-screen" class="screen">
        <h1 class="game-title">é¸æ“‡ä½ æƒ³ç·´ç¿’çš„é»å¿ƒ</h1>
        <div class="dish-grid">
            <div class="dish-card" data-dish="beef_balls">
                <div class="dish-image"></div>
                <h3>ç‰›è‚‰çƒ</h3>
            </div>
            <div class="dish-card" data-dish="char_siu_bao">
                <div class="dish-image"></div>
                <h3>å‰ç‡’åŒ…</h3>
            </div>
            <div class="dish-card" data-dish="egg_tart">
                <div class="dish-image"></div>
                <h3>é…¥çš®è›‹æ’»</h3>
            </div>
            <div class="dish-card" data-dish="soup_dumpling">
                <div class="dish-image"></div>
                <h3>é­šç¿…çŒæ¹¯é¤ƒ</h3>
            </div>
            <div class="dish-card" data-dish="lava_bun">
                <div class="dish-image"></div>
                <h3>å¥¶çš‡æµæ²™åŒ…</h3>
            </div>
        </div>
        <div class="action-buttons">
            <button class="btn" id="back-to-demo">å›åˆ°ç¤ºç¯„</button>
        </div>
    </div>

    <div id="game-screen" class="screen">
        <div class="game-header">
            <div class="game-dish-info">
                <div class="dish-image-small" id="current-dish-image"></div>
                <h2 id="current-dish-name"></h2>
            </div>
            <div class="game-controls">
                <button class="btn" id="check-answers">æª¢æŸ¥ç­”æ¡ˆ</button>
                <button class="btn" id="reset-game">é‡è¨­</button>
                <button class="btn" id="back-to-selection">é¸æ“‡å…¶ä»–é»å¿ƒ</button>
            </div>
        </div>
        <div class="game-content">
            <div class="vocabulary-bank">
                <h3>è©å½™åº«</h3>
                <div id="vocabulary-container"></div>
            </div>
            <div class="text-area">
                <div class="game-section taste">
                    <div class="section-header">
                        <span class="section-icon">ğŸ‘…</span>
                        <h3>å‘³ (å£æ„Ÿèˆ‡å‘³é“)</h3>
                        <span class="section-feedback" id="taste-feedback"></span>
                    </div>
                    <p id="taste-text" class="text-content"></p>
                </div>
                <div class="game-section aroma">
                    <div class="section-header">
                        <span class="section-icon">ğŸ‘ƒ</span>
                        <h3>é¦™ (é¦™æ°£èˆ‡æ°£å‘³)</h3>
                        <span class="section-feedback" id="aroma-feedback"></span>
                    </div>
                    <p id="aroma-text" class="text-content"></p>
                </div>
                <div class="game-section appearance">
                    <div class="section-header">
                        <span class="section-icon">ğŸ‘ï¸</span>
                        <h3>è‰² (å¤–è§€èˆ‡é¡è‰²)</h3>
                        <span class="section-feedback" id="appearance-feedback"></span>
                    </div>
                    <p id="appearance-text" class="text-content"></p>
                </div>
                <div class="game-section special">
                    <div class="section-header">
                        <span class="section-icon">âœ¨</span>
                        <h3>ç‰¹åˆ¥ä¹‹è™•</h3>
                    </div>
                    <textarea class="special-textarea" id="special-text-input" placeholder="è«‹è‡ªè¡Œè£œå……"></textarea>
                </div>
            </div>
        </div>
    </div>

    <script>
        const gameData = {
            dishes: {
                beef_balls: {
                    name: "ç‰›è‚‰çƒ",
                    image: "/images/image1.jpg",
                    text: {
                        taste: "é€™é“é»å¿ƒé¸ç”¨äº†æ–°é®®ç‰›è…¿è‚‰ä½œç‚ºä¸»æ–™ï¼Œå› ç‚ºå®ƒ______ï¼Œæ­é…æ¸…æ–°çš„èŠ¹èœæœ«å’Œçˆ½è„†çš„æœ¨è€³çµ²ï¼Œå…¥å£______ï¼Œé‚„å¸¶è‘—è”¬èœçš„______ã€‚",
                        aroma: "æˆ‘å€‘ç‰¹åˆ¥ç”¨èŠ±æ¤’æ°´å’Œé†¬æ²¹ä¾†é†ƒè£½ç‰›è‚‰ï¼Œè®“ç‰›è‚‰æ•£ç™¼å‡º______ï¼Œå¾®å¾®å¸¶é»______ã€‚",
                        appearance: "è£½ä½œæ™‚ï¼Œæˆ‘å€‘æ¡ç”¨______çš„æŠ€è—ï¼Œå°‡ç‰›è‚‰åè¦†æ¶æ‰“è‡³é»æ€§åè¶³ï¼Œè®“è’¸ç†Ÿå¾Œçš„ç‰›è‚‰çƒï¼Œå‘ˆç¾å‡º______çš„è‚‰ä¸¸é€ å‹ã€‚"
                    },
                    vocabulary: [
                        { text: "æ¸…çˆ½è„†æ„Ÿ", pinyin: "qÄ«ng shuÇng cuÃ¬ gÇn" },
                        { text: "é®®å«©å½ˆç‰™", pinyin: "xiÄn nÃ¨n tÃ¡n yÃ¡" },
                        { text: "ç´‹ç†ç´°ç·»ã€å¸¶æœ‰è±å¯Œè† è³ª", pinyin: "wÃ©n lÇ xÃ¬ zhÃ¬ã€dÃ i yÇ’u fÄ“ng fÃ¹ jiÄo zhÃ¬" },
                        { text: "å…‰æ»‘ç·Šå¯¦ã€åœ“æ½¤å¯æ„›", pinyin: "guÄng huÃ¡ jÇn shÃ­ã€yuÃ¡n rÃ¹n kÄ› Ã i" },
                        { text: "éº»é¦™", pinyin: "mÃ¡ xiÄng" },
                        { text: "æ‰‹å·¥æ—è£½", pinyin: "shÇ’u gÅng dÇo zhÃ¬" },
                        { text: "æ¿ƒéƒçš„é®®é¦™", pinyin: "nÃ³ng yÃ¹ de xiÄn xiÄng" }
                    ],
                    answers: {
                        taste: ["ç´‹ç†ç´°ç·»ã€å¸¶æœ‰è±å¯Œè† è³ª", "é®®å«©å½ˆç‰™", "æ¸…çˆ½è„†æ„Ÿ"],
                        aroma: ["æ¿ƒéƒçš„é®®é¦™", "éº»é¦™"],
                        appearance: ["æ‰‹å·¥æ—è£½", "å…‰æ»‘ç·Šå¯¦ã€åœ“æ½¤å¯æ„›"]
                    }
                },
                char_siu_bao: {
                    name: "å‰ç‡’åŒ…",
                    image: "/images/image2.jpg",
                    text: {
                        taste: "é€™é“é»å¿ƒé¸ç”¨å„ªè³ªäº”èŠ±è‚‰è£½ä½œå‰ç‡’ï¼Œå› ç‚ºå®ƒ______ï¼Œæ­é…ç´…è”¥é ­å’Œå¤©ç„¶èœœç³–ï¼Œåƒèµ·ä¾†______ï¼Œ______ã€‚",
                        aroma: "æˆ‘å€‘ç”¨ä½æº«æ…¢çƒ¤çš„æ–¹å¼è™•ç†å‰ç‡’ï¼ŒåŠ å…¥ç«ç‘°éœ²é…’ä¾†æå‘³ï¼Œè®“åŒ…å­æ•£ç™¼å‡º______ã€‚",
                        appearance: "è£½ä½œæ™‚ï¼Œæˆ‘å€‘æ¡ç”¨______æŠ€è—ï¼Œå°‡éºµåœ˜åè¦†æ‰å£“å¾ŒåŒ…å…¥é¤¡æ–™ï¼Œè’¸ç†Ÿå¾Œçš„å¤–çš®è“¬é¬†æŸ”è»Ÿï¼Œå‘ˆç¾å‡º______çš„åŒ…å­é€ å‹ã€‚"
                    },
                    vocabulary: [
                        { text: "ç”œé¹¹äº¤è", pinyin: "tiÃ¡n xiÃ¡n jiÄo rÃ³ng" },
                        { text: "è‚‰è³ªè»Ÿå«©å¤šæ±", pinyin: "rÃ²u zhÃ¬ ruÇn nÃ¨n duÅ zhÄ«" },
                        { text: "æ½”ç™½å¦‚é›ªã€åœ“æ½¤è¨å–œ", pinyin: "jiÃ© bÃ¡i rÃº xuÄ›ã€yuÃ¡n rÃ¹n tÇo xÇ" },
                        { text: "ç¨ç‰¹çš„èŠ±é¦™èˆ‡æ¿ƒéƒè‚‰é¦™", pinyin: "dÃº tÃ¨ de huÄ xiÄng yÇ” nÃ³ng yÃ¹ rÃ²u xiÄng" },
                        { text: "å‚³çµ±é…µæ¯ç™¼é…µ", pinyin: "chuÃ¡n tÇ’ng jiÃ o mÇ” fÄ jiÃ o" },
                        { text: "è‚¥ç˜¦å‡è¡¡ã€å£æ„Ÿè±å¯Œ", pinyin: "fÃ©i shÃ²u jÅ«n hÃ©ngã€kÇ’u gÇn fÄ“ng fÃ¹" }
                    ],
                    answers: {
                        taste: ["è‚¥ç˜¦å‡è¡¡ã€å£æ„Ÿè±å¯Œ", "ç”œé¹¹äº¤è", "è‚‰è³ªè»Ÿå«©å¤šæ±"],
                        aroma: ["ç¨ç‰¹çš„èŠ±é¦™èˆ‡æ¿ƒéƒè‚‰é¦™"],
                        appearance: ["å‚³çµ±é…µæ¯ç™¼é…µ", "æ½”ç™½å¦‚é›ªã€åœ“æ½¤è¨å–œ"]
                    }
                },
                egg_tart: {
                    name: "é…¥çš®è›‹æ’»",
                    image: "/images/image3.jpg",
                    text: {
                        taste: "é€™é“é»å¿ƒé¸ç”¨æœ¬åœ°è¾²å ´ç›´é€çš„é›è›‹å’Œé®®å¥¶è£½ä½œè›‹æ¼¿ï¼Œå› ç‚ºé€™æ¨£çš„è›‹æ¼¿______ï¼Œæ­é…é€²å£é¦™è‰ç±½çš„ç´°è†©é¦™æ°£ï¼Œåƒèµ·ä¾†______ï¼Œ______ã€‚",
                        aroma: "æˆ‘å€‘ç”¨æ…¢ç«ç†¬ç…®è›‹æ¼¿ï¼ŒåŠ å…¥æ¥“ç³–æ¼¿å¢æ·»å±¤æ¬¡ï¼Œè®“è›‹æ’»æ•£ç™¼å‡º______èˆ‡______ã€‚",
                        appearance: "è£½ä½œæ™‚ï¼Œæˆ‘å€‘æ¡ç”¨______çš„æŠ€è—ï¼Œå°‡éºµåœ˜èˆ‡ç‰›æ²¹åè¦†æ‘ºç–Šå£“è£½ï¼Œè®“è›‹æ’»æ®¼çƒ˜çƒ¤å¾Œï¼Œå‘ˆç¾å‡º______é€ å‹ã€‚"
                    },
                    vocabulary: [
                        { text: "æº«æ½¤å¥¶é¦™", pinyin: "wÄ“n rÃ¹n nÇi xiÄng" },
                        { text: "è‰²æ¾¤é‡‘é»ƒã€å£æ„Ÿæ¿ƒéƒ", pinyin: "sÃ¨ zÃ© jÄ«n huÃ¡ngã€kÇ’u gÇn nÃ³ng yÃ¹" },
                        { text: "é‡‘é»ƒé…¥è„†çš„åƒå±¤", pinyin: "jÄ«n huÃ¡ng sÅ« cuÃ¬ de qiÄn cÃ©ng" },
                        { text: "ç”œè€Œä¸è†©", pinyin: "tiÃ¡n Ã©r bÃ¹ nÃ¬" },
                        { text: "æ·¡æ·¡çš„æ¥“ç³–èŠ¬èŠ³", pinyin: "dÃ n dÃ n de fÄ“ng tÃ¡ng fÄ“n fÄng" },
                        { text: "çƒ˜çƒ¤åƒå±¤é…¥çš®", pinyin: "hÅng kÇo qiÄn cÃ©ng sÅ« pÃ­" },
                        { text: "å…¥å£æ»‘é †", pinyin: "rÃ¹ kÇ’u huÃ¡ shÃ¹n" }
                    ],
                    answers: {
                        taste: ["è‰²æ¾¤é‡‘é»ƒã€å£æ„Ÿæ¿ƒéƒ", "ç”œè€Œä¸è†©", "å…¥å£æ»‘é †"],
                        aroma: ["æº«æ½¤å¥¶é¦™", "æ·¡æ·¡çš„æ¥“ç³–èŠ¬èŠ³"],
                        appearance: ["çƒ˜çƒ¤åƒå±¤é…¥çš®", "é‡‘é»ƒé…¥è„†çš„åƒå±¤"]
                    }
                },
                soup_dumpling: {
                    name: "é­šç¿…çŒæ¹¯é¤ƒ",
                    image: "/images/image4.jpg",
                    text: {
                        taste: "é€™é“é»å¿ƒé¸ç”¨é ‚ç´šé­šç¿…èˆ‡æ–°é®®èŸ¹é»ƒä½œç‚ºä¸»æ–™ï¼Œå› ç‚ºé­šç¿…______ï¼Œæ­é…ç˜¦è‚‰çµ²å’Œé«˜æ¹¯å‡ï¼Œå…¥å£______ï¼Œ______ã€‚",
                        aroma: "æˆ‘å€‘ç”¨æ…¢ç«ç†¬è£½é«˜æ¹¯å‡ï¼Œä¸¦åŠ å…¥ç±³é…’ä¾†æå‘³ï¼Œè®“______èˆ‡______å®Œç¾ç¶»æ”¾ã€‚",
                        appearance: "è£½ä½œæ™‚ï¼Œæˆ‘å€‘æ¡ç”¨______æŠ€è—ï¼Œå°‡æ¹¯æ±èˆ‡é¤¡æ–™å°é–åœ¨åŠé€æ˜çš„é»ƒçš®å…§ï¼Œè®“è’¸ç†Ÿå¾Œçš„æ¹¯é¤ƒå‘ˆç¾______çš„é¤ƒå­é€ å‹ã€‚"
                    },
                    vocabulary: [
                        { text: "æ‰‹å·¥æ‘ºç–Šè–„çš®", pinyin: "shÇ’u gÅng zhÃ© diÃ© bÃ¡o pÃ­" },
                        { text: "å£æ„Ÿç´°è†©ã€æµ·é®®é¢¨å‘³æ¿ƒéƒ", pinyin: "kÇ’u gÇn xÃ¬ nÃ¬ã€hÇi xiÄn fÄ“ng wÃ¨i nÃ³ng yÃ¹" },
                        { text: "æ¹¯æ±é®®ç¾", pinyin: "tÄng zhÄ« xiÄn mÄ›i" },
                        { text: "æ»‘å«©å¤šæ±", pinyin: "huÃ¡ nÃ¨n duÅ zhÄ«" },
                        { text: "æ™¶ç‘©å‰”é€ã€é£½æ»¿åœ“æ½¤", pinyin: "jÄ«ng yÃ­ng tÄ« tÃ²uã€bÇo mÇn yuÃ¡n rÃ¹n" },
                        { text: "æ¹¯æ±çš„é†‡åšé¦™æ°£", pinyin: "tÄng zhÄ« de chÃºn hÃ²u xiÄng qÃ¬" },
                        { text: "èŸ¹é»ƒçš„é®®ç”œ", pinyin: "xiÃ¨ huÃ¡ng de xiÄn tiÃ¡n" }
                    ],
                    answers: {
                        taste: ["å£æ„Ÿç´°è†©ã€æµ·é®®é¢¨å‘³æ¿ƒéƒ", "æ¹¯æ±é®®ç¾", "æ»‘å«©å¤šæ±"],
                        aroma: ["èŸ¹é»ƒçš„é®®ç”œ", "æ¹¯æ±çš„é†‡åšé¦™æ°£"],
                        appearance: ["æ‰‹å·¥æ‘ºç–Šè–„çš®", "æ™¶ç‘©å‰”é€ã€é£½æ»¿åœ“æ½¤"]
                    }
                },
                lava_bun: {
                    name: "å¥¶çš‡æµæ²™åŒ…",
                    image: "/images/image5.jpg",
                    text: {
                        taste: "é€™é“å¥¶çš‡æµæ²™åŒ…é¸ç”¨æœ¬åœ°é ‚ç´šé¹¹è›‹é»ƒä½œç‚ºä¸»æ–™ï¼Œå› ç‚ºå®ƒ______ï¼Œæ­é…æ¤°å¥¶å’Œç™½ç³–å¢æ·»å±¤æ¬¡ï¼Œå…¥å£______ï¼Œ______ã€‚",
                        aroma: "æˆ‘å€‘ç”¨ä½æº«æ…¢ç…®é¤¡æ–™ï¼ŒåŠ å…¥é¦™è˜­è‘‰ä¾†æå‘³ï¼Œè®“______èˆ‡______æ’²é¼»è€Œä¾†ã€‚",
                        appearance: "è£½ä½œæ™‚ï¼Œæˆ‘å€‘æ¡ç”¨______æŠ€è—ï¼Œå°‡éºµåœ˜çš®åŒ…å…¥æµå¿ƒé¤¡å¾Œï¼Œå†ç¶“äºŒæ¬¡è’¸è£½ï¼Œè®“æµæ²™åŒ…å‘ˆç¾å‡º______çš„é€ å‹ã€‚"
                    },
                    vocabulary: [
                        { text: "è›‹é»ƒçš„æ¿ƒéƒèŠ¬èŠ³", pinyin: "dÃ n huÃ¡ng de nÃ³ng yÃ¹ fÄ“n fÄng" },
                        { text: "è³ªåœ°ç¶¿å¯†ã€é¢¨å‘³æ¿ƒåš", pinyin: "zhÃ¬ dÃ¬ miÃ¡n mÃ¬ã€fÄ“ng wÃ¨i nÃ³ng hÃ²u" },
                        { text: "ç”œé¹¹å¹³è¡¡", pinyin: "tiÃ¡n xiÃ¡n pÃ­ng hÃ©ng" },
                        { text: "æŸ”æ»‘é †å£", pinyin: "rÃ³u huÃ¡ shÃ¹n kÇ’u" },
                        { text: "æ¤°é¦™", pinyin: "yÄ“ xiÄng" },
                        { text: "æ½”ç™½æŸ”è»Ÿã€åœ“æ½¤è¨å–œ", pinyin: "jiÃ© bÃ¡i rÃ³u ruÇnã€yuÃ¡n rÃ¹n tÇo xÇ" },
                        { text: "é›™é‡ç™¼é…µéºµåœ˜", pinyin: "shuÄng chÃ³ng fÄ jiÃ o miÃ n tuÃ¡n" }
                    ],
                    answers: {
                        taste: ["è³ªåœ°ç¶¿å¯†ã€é¢¨å‘³æ¿ƒåš", "ç”œé¹¹å¹³è¡¡", "æŸ”æ»‘é †å£"],
                        aroma: ["æ¤°é¦™", "è›‹é»ƒçš„æ¿ƒéƒèŠ¬èŠ³"],
                        appearance: ["é›™é‡ç™¼é…µéºµåœ˜", "æ½”ç™½æŸ”è»Ÿã€åœ“æ½¤è¨å–œ"]
                    }
                }
            }
        };

        let currentScreen = 'welcome';
        let currentDish = null;
        let draggedElement = null;
        let speechSynthesis = null;

        document.addEventListener('DOMContentLoaded', () => {
            initializeSpeechSynthesis();
            initializeEventListeners();
            showScreen('welcome');
        });

        function initializeSpeechSynthesis() {
            if ('speechSynthesis' in window) {
                speechSynthesis = window.speechSynthesis;
            } else {
                console.log('Speech synthesis not supported in this browser.');
            }
        }

        function speakText(text) {
            if (speechSynthesis && text) {
                speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'zh-CN';
                utterance.rate = 0.8;
                utterance.pitch = 1;
                speechSynthesis.speak(utterance);
            }
        }

        function initializeEventListeners() {
            document.getElementById('start-demo').addEventListener('click', (e) => {
                e.preventDefault();
                showScreen('demo');
            });
            document.getElementById('start-game').addEventListener('click', (e) => {
                e.preventDefault();
                showScreen('selection');
            });
            document.getElementById('back-to-demo').addEventListener('click', (e) => {
                e.preventDefault();
                showScreen('demo');
            });
            document.getElementById('back-to-selection').addEventListener('click', (e) => {
                e.preventDefault();
                showScreen('selection');
            });
            document.getElementById('reset-game').addEventListener('click', (e) => {
                e.preventDefault();
                resetCurrentGame();
            });
            document.getElementById('check-answers').addEventListener('click', (e) => {
                e.preventDefault();
                checkAllAnswers();
            });

            document.querySelectorAll('.dish-card').forEach(card => {
                const dishKey = card.getAttribute('data-dish');
                const dishImage = card.querySelector('.dish-image');
                if (gameData.dishes[dishKey].image) {
                    dishImage.style.backgroundImage = `url(${gameData.dishes[dishKey].image})`;
                    dishImage.style.backgroundSize = 'cover';
                }
                card.addEventListener('click', (e) => {
                    e.preventDefault();
                    startGame(dishKey);
                });
            });
        }

        function showScreen(screenName) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            const targetScreen = document.getElementById(`${screenName}-screen`);
            if (targetScreen) {
                targetScreen.classList.add('active');
                currentScreen = screenName;
            }
        }

        function startGame(dishKey) {
            currentDish = dishKey;
            const dish = gameData.dishes[dishKey];
            const dishNameEl = document.getElementById('current-dish-name');
            const dishImageEl = document.getElementById('current-dish-image');
            dishNameEl.textContent = dish.name;
            if (dishImageEl && dish.image) {
                dishImageEl.style.backgroundImage = `url(${dish.image})`;
                dishImageEl.style.backgroundSize = 'cover';
                dishImageEl.setAttribute('alt', dish.name);
            }
            generateGameContent(dish);
            showScreen('game');
        }

        function generateGameContent(dish) {
            document.querySelectorAll('.text-content').forEach(content => {
                content.innerHTML = '';
            });
            document.querySelectorAll('.section-feedback').forEach(feedback => {
                feedback.innerHTML = '';
            });

            ['taste', 'aroma', 'appearance'].forEach(section => {
                const text = dish.text[section];
                const contentDiv = document.getElementById(`${section}-text`);
                if (contentDiv && text) {
                    contentDiv.innerHTML = createTextWithBlanks(text, section);
                }
            });

            document.getElementById('special-text-input').value = '';
            generateVocabularyBank(dish.vocabulary);
            setTimeout(addDragAndDropListeners, 100);
        }

        function createTextWithBlanks(text, section) {
            let blankId = 0;
            return text.replace(/______/g, () => `<span class="blank" data-blank-id="${blankId++}" data-section="${section}"></span>`);
        }

        function generateVocabularyBank(vocabulary) {
            const container = document.getElementById('vocabulary-container');
            container.innerHTML = '';
            vocabulary.forEach((wordObj, index) => {
                const wordElement = document.createElement('div');
                wordElement.className = 'vocabulary-word';
                wordElement.textContent = wordObj.text;
                wordElement.draggable = true;
                wordElement.setAttribute('data-word', wordObj.text);
                wordElement.setAttribute('data-word-id', index);
                wordElement.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (!wordElement.classList.contains('used')) {
                        speakText(wordObj.text);
                    }
                });
                container.appendChild(wordElement);
            });
        }

        function addDragAndDropListeners() {
            document.querySelectorAll('.vocabulary-word').forEach(word => {
                word.addEventListener('dragstart', e => {
                    draggedElement = e.target;
                    e.target.classList.add('dragging');
                    e.dataTransfer.setData('text/html', e.target.outerHTML);
                    speakText(e.target.getAttribute('data-word'));
                });
                word.addEventListener('dragend', e => {
                    e.target.classList.remove('dragging');
                    draggedElement = null;
                });
            });

            document.querySelectorAll('.blank').forEach(blank => {
                blank.addEventListener('dragover', e => {
                    e.preventDefault();
                    if (!blank.classList.contains('filled')) {
                        e.dataTransfer.dropEffect = 'move';
                    }
                });
                blank.addEventListener('dragenter', e => {
                    e.preventDefault();
                    if (!blank.classList.contains('filled')) {
                        blank.classList.add('drag-over');
                    }
                });
                blank.addEventListener('dragleave', e => {
                    blank.classList.remove('drag-over');
                });
                blank.addEventListener('drop', handleDrop);
            });
        }

        function handleDrop(e) {
            e.preventDefault();
            const blank = e.target;
            if (!blank.classList.contains('blank') || blank.classList.contains('filled')) return;

            blank.classList.remove('drag-over');
            if (draggedElement && draggedElement.classList.contains('vocabulary-word')) {
                const word = draggedElement.getAttribute('data-word');
                const wordId = draggedElement.getAttribute('data-word-id');
                const filledWord = document.createElement('span');
                filledWord.className = 'filled-word';
                filledWord.textContent = word;
                filledWord.setAttribute('data-word', word);
                filledWord.setAttribute('data-word-id', wordId);
                filledWord.setAttribute('data-section', blank.getAttribute('data-section'));
                filledWord.addEventListener('click', () => returnWordToBank(filledWord));
                blank.parentNode.replaceChild(filledWord, blank);
                draggedElement.classList.add('used');
                draggedElement.draggable = false;
            }
        }

        function checkAllAnswers() {
            if (!currentDish) return;
            const dish = gameData.dishes[currentDish];
            ['taste', 'aroma', 'appearance'].forEach(section => {
                const correctAnswers = dish.answers[section];
                const filledWords = document.querySelectorAll(`.filled-word[data-section="${section}"]`);
                const feedbackEl = document.getElementById(`${section}-feedback`);
                let allCorrect = true;
                let correctCount = 0;

                filledWords.forEach((word, index) => {
                    const text = word.getAttribute('data-word');
                    const isCorrect = correctAnswers[index] === text;
                    word.classList.remove('correct', 'incorrect');
                    word.classList.add(isCorrect ? 'correct' : 'incorrect');
                    if (isCorrect) correctCount++;
                    else allCorrect = false;
                });

                if (filledWords.length < correctAnswers.length) allCorrect = false;
                feedbackEl.textContent = allCorrect ? 'âœ“' : 'âœ—';
                feedbackEl.classList.remove('correct', 'incorrect');
                feedbackEl.classList.add(allCorrect ? 'correct' : 'incorrect');
            });
        }

        function resetCurrentGame() {
            if (currentDish) {
                generateGameContent(gameData.dishes[currentDish]);
            }
        }

        function returnWordToBank(filledWord) {
            const wordId = filledWord.getAttribute('data-word-id');
            const section = filledWord.getAttribute('data-section');
            const blank = document.createElement('span');
            blank.className = 'blank';
            blank.setAttribute('data-section', section);
            blank.addEventListener('dragover', e => {
                e.preventDefault();
                if (!blank.classList.contains('filled')) {
                    e.dataTransfer.dropEffect = 'move';
                }
            });
            blank.addEventListener('dragenter', e => {
                e.preventDefault();
                if (!blank.classList.contains('filled')) {
                    blank.classList.add('drag-over');
                }
            });
            blank.addEventListener('dragleave', e => {
                blank.classList.remove('drag-over');
            });
            blank.addEventListener('drop', handleDrop);
            filledWord.parentNode.replaceChild(blank, filledWord);
            document.querySelectorAll('.vocabulary-word').forEach(word => {
                if (word.getAttribute('data-word-id') === wordId) {
                    word.classList.remove('used');
                    word.draggable = true;
                }
            });
            document.getElementById(`${section}-feedback`).textContent = '';
        }
    </script>
</body>
</html>